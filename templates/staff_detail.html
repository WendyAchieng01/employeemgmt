{% extends 'base.html' %}

{% block title %}{{ staff.full_name }} - Staff Details{% endblock %}

{% block content %}
<div class="container mx-auto px-4 py-8">
    <div class="max-w-6xl mx-auto">
        <!-- Header -->
        <div class="flex justify-between items-center mb-6">
            <div class="flex items-center space-x-4">
                <a href="{% url 'core:staff_list' %}" class="text-purple-600 hover:text-purple-800">
                    <i class="fas fa-arrow-left mr-2"></i>Back to Staff List
                </a>
            </div>
            <div class="flex space-x-3">
                <a href="{% url 'core:staff_update' staff.unique_id %}" class="bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition duration-200">
                    <i class="fas fa-edit mr-2"></i>Edit Staff
                </a>
                <button onclick="window.print()" class="bg-gray-600 text-white px-4 py-2 rounded-lg hover:bg-gray-700 transition duration-200">
                    <i class="fas fa-print mr-2"></i>Print
                </button>
            </div>
        </div>

        <div class="bg-white rounded-lg card-shadow overflow-hidden">
            <!-- Header Section -->
            <div class="gradient-bg text-white px-6 py-8">
                <div class="flex items-center space-x-6">
                    <div class="h-24 w-24 rounded-full bg-white bg-opacity-20 flex items-center justify-center">
                        <span class="text-white text-2xl font-bold">
                            {{ staff.first_name.0 }}{{ staff.last_name.0 }}
                        </span>
                    </div>
                    <div>
                        <h1 class="text-3xl font-bold">{{ staff.full_name }}</h1>
                        <p class="text-xl opacity-90">{{ staff.position }}</p>
                        <p class="text-lg opacity-80">{{ staff.unique_id }}</p>
                        <span class="inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-white bg-opacity-20 mt-2">
                            {{ staff.get_employment_status_display }}
                        </span>
                    </div>
                </div>
            </div>

            <div class="p-6">
                <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
                    <!-- Left Column - Quick Info -->
                    <div class="lg:col-span-1">
                        <div class="bg-gray-50 p-6 rounded-lg mb-6">
                            <h3 class="font-semibold text-gray-700 mb-4 flex items-center">
                                <i class="fas fa-info-circle mr-2 text-blue-500"></i>Quick Information
                            </h3>
                            <div class="space-y-3">
                                <div class="flex justify-between items-center py-2 border-b border-gray-200">
                                    <span class="text-gray-600">Department:</span>
                                    <span class="font-medium">{{ staff.department.name }}</span>
                                </div>
                                <div class="flex justify-between items-center py-2 border-b border-gray-200">
                                    <span class="text-gray-600">Years of Service:</span>
                                    <span class="font-medium">{{ staff.years_of_service }} years</span>
                                </div>
                                <div class="flex justify-between items-center py-2 border-b border-gray-200">
                                    <span class="text-gray-600">Employment Date:</span>
                                    <span class="font-medium">{{ staff.employment_date|date:"M d, Y" }}</span>
                                </div>
                                <div class="flex justify-between items-center py-2">
                                    <span class="text-gray-600">Status:</span>
                                    <span class="font-medium text-green-600">{{ staff.get_employment_status_display }}</span>
                                </div>
                            </div>
                        </div>

                        <div class="bg-gray-50 p-6 rounded-lg">
                            <h3 class="font-semibold text-gray-700 mb-4 flex items-center">
                                <i class="fas fa-phone mr-2 text-red-500"></i>Emergency Contact
                            </h3>
                            <div class="space-y-2">
                                <div><span class="text-gray-600">Name:</span> <span class="ml-2 font-medium">{{ staff.emergency_contact_name }}</span></div>
                                <div><span class="text-gray-600">Phone:</span> <span class="ml-2 font-medium">{{ staff.emergency_contact_phone }}</span></div>
                                <div><span class="text-gray-600">Relationship:</span> <span class="ml-2 font-medium">{{ staff.emergency_contact_relationship }}</span></div>
                            </div>
                        </div>
                    </div>

                    <!-- Right Column - Detailed Info -->
                    <div class="lg:col-span-2">
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                            <!-- Personal Information -->
                            <div class="bg-gray-50 p-6 rounded-lg">
                                <h3 class="font-semibold text-gray-700 mb-4 flex items-center">
                                    <i class="fas fa-user mr-2 text-blue-500"></i>Personal Information
                                </h3>
                                <div class="space-y-3">
                                    <div><span class="text-gray-600">Full Name:</span> <span class="ml-2 font-medium">{{ staff.full_name }}</span></div>
                                    <div><span class="text-gray-600">Email:</span> <span class="ml-2 font-medium">{{ staff.email }}</span></div>
                                    <div><span class="text-gray-600">Phone:</span> <span class="ml-2 font-medium">{{ staff.phone }}</span></div>
                                    <div><span class="text-gray-600">Gender:</span> <span class="ml-2 font-medium">{{ staff.get_gender_display }}</span></div>
                                    <div><span class="text-gray-600">Date of Birth:</span> <span class="ml-2 font-medium">{{ staff.date_of_birth|date:"M d, Y" }}</span></div>
                                    <div><span class="text-gray-600">National ID:</span> <span class="ml-2 font-medium">{{ staff.national_id }}</span></div>
                                    <div><span class="text-gray-600">Address:</span> <span class="ml-2 font-medium">{{ staff.address }}</span></div>
                                </div>
                            </div>

                            <!-- Employment Information -->
                            <div class="bg-gray-50 p-6 rounded-lg">
                                <h3 class="font-semibold text-gray-700 mb-4 flex items-center">
                                    <i class="fas fa-briefcase mr-2 text-green-500"></i>Employment Information
                                </h3>
                                <div class="space-y-3">
                                    <div><span class="text-gray-600">Staff ID:</span> <span class="ml-2 font-medium">{{ staff.unique_id }}</span></div>
                                    <div><span class="text-gray-600">Department:</span> <span class="ml-2 font-medium">{{ staff.department.name }} ({{ staff.department.code }})</span></div>
                                    <div><span class="text-gray-600">Position:</span> <span class="ml-2 font-medium">{{ staff.position }}</span></div>
                                    <div><span class="text-gray-600">Employment Date:</span> <span class="ml-2 font-medium">{{ staff.employment_date|date:"M d, Y" }}</span></div>
                                    <div><span class="text-gray-600">Employment Status:</span> <span class="ml-2 font-medium">{{ staff.get_employment_status_display }}</span></div>
                                    {% if staff.salary %}
                                    <div><span class="text-gray-600">Salary:</span> <span class="ml-2 font-medium">KSh {{ staff.salary|floatformat:2 }}</span></div>
                                    {% endif %}
                                    <div><span class="text-gray-600">Years of Service:</span> <span class="ml-2 font-medium">{{ staff.years_of_service }} years</span></div>
                                </div>
                            </div>

                            <!-- System Information -->
                            <div class="bg-gray-50 p-6 rounded-lg md:col-span-2">
                                <h3 class="font-semibold text-gray-700 mb-4 flex items-center">
                                    <i class="fas fa-database mr-2 text-purple-500"></i>System Information
                                </h3>
                                <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                                    <div><span class="text-gray-600">Staff ID:</span> <span class="ml-2 font-medium">{{ staff.unique_id }}</span></div>
                                    <div><span class="text-gray-600">Created:</span> <span class="ml-2 font-medium">{{ staff.created_at|date:"M d, Y H:i" }}</span></div>
                                    <div><span class="text-gray-600">Last Updated:</span> <span class="ml-2 font-medium">{{ staff.updated_at|date:"M d, Y H:i" }}</span></div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}